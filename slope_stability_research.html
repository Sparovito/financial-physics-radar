<!DOCTYPE html>
<html>
<head>
    <title>SLOPE Stability Research</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background: #1a1a2e; color: #e0e0e0; margin: 0; padding: 20px; }
        h1 { color: #00d4ff; text-align: center; }
        h2 { color: #ff6b6b; margin-top: 30px; }
        .container { max-width: 1200px; margin: 0 auto; }
        .chart { margin: 20px 0; background: #16213e; border-radius: 10px; padding: 15px; }
        .summary { background: #16213e; border-radius: 10px; padding: 20px; margin: 20px 0; }
        .metric { display: inline-block; margin: 10px 20px; text-align: center; }
        .metric-value { font-size: 28px; font-weight: bold; color: #00d4ff; }
        .metric-label { font-size: 14px; color: #888; }
        table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        th { background: #0f3460; padding: 10px; text-align: left; }
        td { padding: 8px 10px; border-bottom: 1px solid #333; }
        .good { color: #4ecdc4; }
        .warn { color: #ffd93d; }
        .formula { background: #0f3460; padding: 15px; border-radius: 8px; font-family: monospace; margin: 10px 0; white-space: pre-line; }
    </style>
</head>
<body>
<div class="container">
    <h1>SLOPE Stability Research</h1>

    <div class="summary">
        <h2>Perche' SLOPE cambia nel tempo?</h2>
        <p>SLOPE (dX) e' la derivata prima del percorso di minima azione x*, calcolato risolvendo un
        sistema tridiagonale. Questo sistema ha <strong>effetti di bordo</strong> che decadono esponenzialmente
        con tasso r = 0.9317/giorno.</p>

        <div style="text-align: center; margin: 20px 0;">
            <div class="metric">
                <div class="metric-value">r = 0.932</div>
                <div class="metric-label">Tasso di decadimento/giorno</div>
            </div>
            <div class="metric">
                <div class="metric-value">r^15 = 35%</div>
                <div class="metric-label">Effetto residuo dopo 15gg</div>
            </div>
            <div class="metric">
                <div class="metric-value">r^30 = 12%</div>
                <div class="metric-label">Effetto residuo dopo 30gg</div>
            </div>
        </div>

        <p>Con &alpha;=200 e &beta;=1, la lunghezza caratteristica &lambda; = &radic;(&alpha;/&beta;) &asymp; 14.14 giorni.
        Dopo ~15 giorni, l'effetto di bordo si riduce al 35%. Dopo ~30 giorni, al 12%.
        Questo spiega perche' i valori di SLOPE cambiano per gli ultimi ~15 punti ogni volta che arrivano nuovi dati.</p>
    </div>

    <div class="chart" id="chart1"></div>

    <div class="summary">
        <h2>Candidati Testati</h2>
        <table>
            <tr><th>Indicatore</th><th>Correlazione</th><th>Stabile?</th><th>Note</th></tr>
            <tr><td>SLOPE Istantaneo (baseline)</td><td>0.853</td><td class="warn">NO</td><td>Cambia ogni giorno</td></tr>
            <tr><td class="good"><strong>dF smoothed EMA(14)</strong></td><td class="good"><strong>0.868</strong></td><td class="good"><strong>SI</strong></td><td class="good"><strong>Velocita' lisciata della curva F</strong></td></tr>
            <tr><td class="good"><strong>MACD(12,26)</strong></td><td class="good"><strong>0.874</strong></td><td class="good"><strong>SI</strong></td><td class="good"><strong>Differenza EMA fast-slow</strong></td></tr>
            <tr><td>Padded Linear 30</td><td>0.865</td><td class="warn">~SI</td><td>Stabile tranne ultimi ~5gg</td></tr>
            <tr><td>dF smoothed EMA(20)</td><td>0.866</td><td class="good">SI</td><td>Piu' liscio, meno reattivo</td></tr>
            <tr><td>MACD(12,30)</td><td>0.875</td><td class="good">SI</td><td>Variante MACD piu' lenta</td></tr>
        </table>

        <p><strong>Limite fondamentale:</strong> La correlazione massima raggiungibile con indicatori causali e' ~0.88.
        Il restante ~12% di varianza viene dalla componente <em>anti-causale</em> della funzione di Green
        (cioe' dipende da dati futuri che non possiamo conoscere).</p>
    </div>

    <div class="chart" id="chart2"></div>

    <div class="summary">
        <h2>Raccomandazione</h2>

        <h3>Opzione A: Semplice e Robusta (consigliata)</h3>
        <div class="formula">
# Calcola la "velocita' lisciata" della curva fondamentale
F = price_series.ewm(span=20, adjust=False).mean()
dF = F.diff().fillna(0)
stable_slope = dF.ewm(span=14).mean()

# Proprieta':
#   - 100% stabile (non cambia MAI per date passate)
#   - Correlazione con SLOPE stabilizzato: ~0.87
#   - Facile da calcolare (nessun sistema tridiagonale)
#   - Concettualmente chiaro: misura la velocita' di F
        </div>

        <h3>Opzione B: MACD come Proxy</h3>
        <div class="formula">
# MACD e' essenzialmente la stessa idea con parametri diversi
ema_fast = price_series.ewm(span=12).mean()
ema_slow = price_series.ewm(span=26).mean()
stable_slope = ema_fast - ema_slow

# Proprieta':
#   - 100% stabile
#   - Correlazione: ~0.87
#   - Indicatore ben noto in finanza
        </div>

        <h3>Perche' non si puo' fare meglio di ~0.88?</h3>
        <p>Lo SLOPE stabilizzato e' il risultato di un filtro <strong>simmetrico</strong>
        (usa sia dati passati che futuri). La parte "futura" del filtro contribuisce per circa
        il 12% della varianza totale. Nessun indicatore causale puo' catturare questa componente.</p>
    </div>
</div>

<script>
// Chart 1: SLOPE comparison
const dates = ["2025-03-31", "2025-04-01", "2025-04-02", "2025-04-03", "2025-04-04", "2025-04-07", "2025-04-08", "2025-04-09", "2025-04-10", "2025-04-11", "2025-04-14", "2025-04-15", "2025-04-16", "2025-04-17", "2025-04-18", "2025-04-21", "2025-04-22", "2025-04-23", "2025-04-24", "2025-04-25", "2025-04-28", "2025-04-29", "2025-04-30", "2025-05-01", "2025-05-02", "2025-05-05", "2025-05-06", "2025-05-07", "2025-05-08", "2025-05-09", "2025-05-12", "2025-05-13", "2025-05-14", "2025-05-15", "2025-05-16", "2025-05-19", "2025-05-20", "2025-05-21", "2025-05-22", "2025-05-23", "2025-05-26", "2025-05-27", "2025-05-28", "2025-05-29", "2025-05-30", "2025-06-02", "2025-06-03", "2025-06-04", "2025-06-05", "2025-06-06", "2025-06-09", "2025-06-10", "2025-06-11", "2025-06-12", "2025-06-13", "2025-06-16", "2025-06-17", "2025-06-18", "2025-06-19", "2025-06-20", "2025-06-23", "2025-06-24", "2025-06-25", "2025-06-26", "2025-06-27", "2025-06-30", "2025-07-01", "2025-07-02", "2025-07-03", "2025-07-04", "2025-07-07", "2025-07-08", "2025-07-09", "2025-07-10", "2025-07-11", "2025-07-14", "2025-07-15", "2025-07-16", "2025-07-17", "2025-07-18", "2025-07-21", "2025-07-22", "2025-07-23", "2025-07-24", "2025-07-25", "2025-07-28", "2025-07-29", "2025-07-30", "2025-07-31", "2025-08-01", "2025-08-04", "2025-08-05", "2025-08-06", "2025-08-07", "2025-08-08", "2025-08-11", "2025-08-12", "2025-08-13", "2025-08-14", "2025-08-15", "2025-08-18", "2025-08-19", "2025-08-20", "2025-08-21", "2025-08-22", "2025-08-25", "2025-08-26", "2025-08-27", "2025-08-28", "2025-08-29", "2025-09-01", "2025-09-02", "2025-09-03", "2025-09-04", "2025-09-05", "2025-09-08", "2025-09-09", "2025-09-10", "2025-09-11", "2025-09-12", "2025-09-15", "2025-09-16", "2025-09-17", "2025-09-18", "2025-09-19", "2025-09-22", "2025-09-23", "2025-09-24", "2025-09-25", "2025-09-26", "2025-09-29", "2025-09-30", "2025-10-01", "2025-10-02", "2025-10-03", "2025-10-06", "2025-10-07", "2025-10-08", "2025-10-09", "2025-10-10", "2025-10-13", "2025-10-14", "2025-10-15", "2025-10-16", "2025-10-17", "2025-10-20", "2025-10-21", "2025-10-22", "2025-10-23", "2025-10-24", "2025-10-27", "2025-10-28", "2025-10-29", "2025-10-30", "2025-10-31", "2025-11-03", "2025-11-04", "2025-11-05", "2025-11-06", "2025-11-07", "2025-11-10", "2025-11-11", "2025-11-12", "2025-11-13", "2025-11-14", "2025-11-17", "2025-11-18", "2025-11-19", "2025-11-20", "2025-11-21", "2025-11-24", "2025-11-25", "2025-11-26", "2025-11-27", "2025-11-28", "2025-12-01", "2025-12-02", "2025-12-03", "2025-12-04", "2025-12-05", "2025-12-08", "2025-12-09", "2025-12-10", "2025-12-11", "2025-12-12", "2025-12-15", "2025-12-16", "2025-12-17", "2025-12-18", "2025-12-19", "2025-12-22", "2025-12-23", "2025-12-24", "2025-12-25", "2025-12-26", "2025-12-29", "2025-12-30", "2025-12-31", "2026-01-01", "2026-01-02"];
const target = [7.0041, 7.3179, 7.6427, 7.9425, 8.1959, 8.353, 8.4439, 8.4524, 8.3837, 8.1864, 7.9, 7.5549, 7.1703, 6.8154, 6.5048, 6.2552, 6.0642, 5.9207, 5.7757, 5.6063, 5.4408, 5.3124, 5.2053, 5.1594, 5.1217, 5.0636, 4.9969, 4.9726, 4.9514, 4.9282, 4.8623, 4.794, 4.7372, 4.6907, 4.6553, 4.6416, 4.6348, 4.66, 4.7134, 4.7911, 4.8807, 4.9652, 5.0746, 5.2545, 5.465, 5.7031, 5.9952, 6.2976, 6.6119, 6.9076, 7.1915, 7.4152, 7.5361, 7.5781, 7.5227, 7.3607, 7.0634, 6.6723, 6.1751, 5.5466, 4.8602, 4.1574, 3.499, 2.8896, 2.3035, 1.694, 1.0634, 0.3672, -0.3481, -1.032, -1.6883, -2.3402, -2.9948, -3.59, -4.1289, -4.5852, -4.9904, -5.3659, -5.6856, -5.9447, -6.1274, -6.2509, -6.3615, -6.4398, -6.5137, -6.5804, -6.6275, -6.6633, -6.6607, -6.6098, -6.4862, -6.3482, -6.2, -6.0272, -5.8343, -5.6188, -5.3804, -5.1391, -4.9193, -4.7091, -4.4898, -4.25, -3.9344, -3.5092, -3.0245, -2.5329, -2.0313, -1.5401, -1.0674, -0.6997, -0.4586, -0.3294, -0.2753, -0.2468, -0.2493, -0.2566, -0.2268, -0.1484, 0.0047, 0.1831, 0.3561, 0.5267, 0.6523, 0.7364, 0.8034, 0.8051, 0.7244, 0.5949, 0.4223, 0.2271, 0.0457, -0.16, -0.448, -0.7809, -1.1793, -1.6254, -2.1101, -2.6207, -3.134, -3.658, -4.1712, -4.6895, -5.2132, -5.7348, -6.2398, -6.7195, -7.1982, -7.6932, -8.1792, -8.6655, -9.1768, -9.6711, -10.1676, -10.6541, -11.153, -11.6514, -12.1107, -12.5013, -12.8377, -13.1407, -13.3966, -13.6273, -13.7965, -13.9151, -13.959, -13.9248, -13.8306, -13.6668, -13.4387, -13.1804, -12.883, -12.5687, -12.2132, -11.8369, -11.4788, -11.0854, -10.6447, -10.1779, -9.6918, -9.1996, -8.6919, -8.1788, -7.6608, -7.1653, -6.7005, -6.2751, -5.88, -5.5055, -5.1385, -4.7915, -4.4522, -4.1279, -3.8653, -3.678, -3.546, -3.4942, -3.5041, -3.5198, -3.5162, -3.4479];
const instant = [0.2374, 0.2463, 0.2899, 0.351, 0.4574, 0.5261, 0.6053, 0.6749, 0.7886, 0.8587, 0.8907, 0.8963, 0.8392, 0.7715, 0.689, 0.6177, 0.5608, 0.5557, 0.5713, 0.5643, 0.5304, 0.5109, 0.4568, 0.4563, 0.4853, 0.4964, 0.4598, 0.4644, 0.466, 0.5008, 0.4884, 0.4629, 0.4423, 0.4267, 0.4019, 0.3969, 0.3637, 0.3304, 0.3034, 0.2914, 0.2967, 0.2678, 0.1995, 0.1707, 0.1512, 0.1115, 0.1147, 0.1173, 0.1476, 0.1722, 0.2456, 0.3528, 0.4335, 0.5254, 0.6177, 0.7303, 0.793, 0.8603, 0.9417, 0.9529, 0.9218, 0.8312, 0.7407, 0.6773, 0.6587, 0.6386, 0.6608, 0.6334, 0.5561, 0.4839, 0.4291, 0.3784, 0.2757, 0.1855, 0.0743, -0.0, -0.0499, -0.1136, -0.1764, -0.2521, -0.3113, -0.3294, -0.3643, -0.3737, -0.3895, -0.4177, -0.4389, -0.4788, -0.5222, -0.5853, -0.5847, -0.5796, -0.5903, -0.5909, -0.5912, -0.5943, -0.5779, -0.5411, -0.5205, -0.5143, -0.512, -0.5647, -0.6418, -0.667, -0.6404, -0.6179, -0.5778, -0.5301, -0.4051, -0.2656, -0.1483, -0.0731, -0.0514, -0.0272, -0.0267, -0.0634, -0.1112, -0.1787, -0.1926, -0.1806, -0.1694, -0.1198, -0.0739, -0.0554, 0.0028, 0.0695, 0.1014, 0.127, 0.1296, 0.0998, 0.103, 0.1599, 0.1746, 0.2052, 0.2165, 0.2153, 0.2001, 0.1656, 0.1379, 0.0927, 0.0606, 0.0309, -0.0017, -0.0539, -0.114, -0.1469, -0.163, -0.202, -0.2325, -0.2389, -0.2858, -0.3104, -0.3458, -0.3589, -0.3865, -0.4517, -0.543, -0.6151, -0.6657, -0.7262, -0.758, -0.8211, -0.8721, -0.9401, -1.0088, -1.0619, -1.1225, -1.1779, -1.1968, -1.2207, -1.2159, -1.2316, -1.2256, -1.1797, -1.1905, -1.2089, -1.2016, -1.1898, -1.1608, -1.1393, -1.1083, -1.075, -1.0102, -0.94, -0.8644, -0.8023, -0.7545, -0.7182, -0.6738, -0.642, -0.6055, -0.5248, -0.4349, -0.3659, -0.2793, -0.2162, -0.2119, -0.2318, -0.2912, -0.3481];
const dF14 = [3.086, 3.1348, 3.7424, 4.595, 6.1253, 6.9648, 7.9361, 8.71, 10.1606, 10.8467, 10.9073, 10.5745, 9.289, 7.944, 6.4689, 5.2774, 4.3986, 4.4025, 4.7301, 4.6713, 4.1825, 3.9508, 3.1774, 3.3033, 3.8851, 4.1326, 3.5986, 3.7544, 3.8449, 4.4571, 4.2697, 3.8863, 3.6043, 3.417, 3.0907, 3.0964, 2.6454, 2.2182, 1.9118, 1.8558, 2.07, 1.7157, 0.7488, 0.4666, 0.3387, -0.1155, 0.1325, 0.3408, 0.9673, 1.4532, 2.6788, 4.3624, 5.5144, 6.7812, 7.9842, 9.4526, 10.0506, 10.7107, 11.5806, 11.3019, 10.3971, 8.6299, 6.9985, 5.9202, 5.6332, 5.3386, 5.7377, 5.3158, 4.1223, 3.0856, 2.3868, 1.7868, 0.3805, -0.7505, -2.1656, -2.9224, -3.27, -3.8465, -4.4004, -5.1546, -5.6283, -5.4469, -5.5766, -5.3216, -5.211, -5.3326, -5.3553, -5.6974, -6.0927, -6.7977, -6.4596, -6.0958, -6.0261, -5.8144, -5.6296, -5.5122, -5.1034, -4.4056, -4.0186, -3.8911, -3.8362, -4.665, -5.831, -6.0954, -5.5259, -5.0675, -4.3658, -3.5907, -1.6337, 0.4316, 2.0191, 2.8497, 2.7967, 2.8135, 2.4775, 1.5906, 0.6072, -0.6148, -0.8889, -0.7291, -0.589, 0.1572, 0.7991, 0.9664, 1.7678, 2.6604, 2.9516, 3.1382, 2.9583, 2.2895, 2.2053, 2.9925, 3.0628, 3.3926, 3.4047, 3.2276, 2.85, 2.1973, 1.7015, 0.9629, 0.4825, 0.0711, -0.3654, -1.093, -1.9061, -2.2429, -2.3007, -2.7348, -3.0176, -2.9109, -3.473, -3.654, -4.0103, -4.0031, -4.2409, -5.0781, -6.2923, -7.1373, -7.605, -8.2232, -8.3677, -9.0255, -9.4728, -10.1866, -10.8925, -11.328, -11.8832, -12.3485, -12.2284, -12.2253, -11.7889, -11.7334, -11.3565, -10.3852, -10.4005, -10.545, -10.2812, -9.9725, -9.4169, -9.023, -8.5071, -7.9892, -7.0005, -5.9881, -4.9459, -4.1776, -3.6709, -3.3651, -2.9302, -2.7067, -2.4019, -1.3931, -0.2824, 0.4425, 1.4285, 2.0013, 1.6283, 0.922, -0.343, -1.4633];
const macd = [2.997, 3.051, 3.6435, 4.4728, 5.9559, 6.7765, 7.7274, 8.4919, 9.9114, 10.599, 10.6888, 10.4032, 9.2028, 7.9452, 6.5605, 5.4452, 4.6259, 4.6508, 4.9821, 4.9376, 4.4763, 4.2594, 3.5185, 3.6404, 4.1984, 4.4331, 3.9149, 4.0599, 4.1414, 4.7247, 4.5387, 4.1644, 3.888, 3.7024, 3.3824, 3.3816, 2.9405, 2.5217, 2.2181, 2.1544, 2.3498, 1.9974, 1.055, 0.7706, 0.6333, 0.1807, 0.4029, 0.586, 1.1714, 1.6222, 2.7862, 4.3935, 5.4928, 6.7074, 7.866, 9.2858, 9.8741, 10.5278, 11.3889, 11.1491, 10.3106, 8.6438, 7.107, 6.0997, 5.8497, 5.5877, 5.9892, 5.5971, 4.4594, 3.4693, 2.8002, 2.222, 0.8633, -0.2348, -1.6115, -2.3597, -2.7196, -3.3043, -3.8711, -4.634, -5.1299, -4.998, -5.1672, -4.9671, -4.9061, -5.0678, -5.1333, -5.505, -5.9268, -6.6456, -6.3599, -6.0488, -6.0195, -5.8517, -5.7078, -5.6266, -5.2626, -4.6181, -4.2697, -4.168, -4.133, -4.9457, -6.0813, -6.3487, -5.8139, -5.3861, -4.7233, -3.9885, -2.1138, -0.1313, 1.3967, 2.2025, 2.1645, 2.1991, 1.8981, 1.0696, 0.1493, -1.0013, -1.2417, -1.0674, -0.9146, -0.1805, 0.4521, 0.6275, 1.4135, 2.2877, 2.5844, 2.782, 2.6283, 2.0047, 1.9438, 2.7208, 2.8073, 3.1438, 3.1744, 3.0229, 2.6782, 2.0679, 1.6071, 0.9105, 0.46, 0.0729, -0.3412, -1.0384, -1.8209, -2.1484, -2.2106, -2.6377, -2.9217, -2.8328, -3.3894, -3.5805, -3.9417, -3.9543, -4.2037, -5.0305, -6.2213, -7.0584, -7.5348, -8.1584, -8.3283, -8.9942, -9.4591, -10.1821, -10.899, -11.3573, -11.9323, -12.4223, -12.3501, -12.3911, -12.0151, -12.0049, -11.6839, -10.7889, -10.8408, -11.0139, -10.7912, -10.5226, -10.0137, -9.6574, -9.1805, -8.6984, -7.7597, -6.7945, -5.7962, -5.057, -4.5645, -4.261, -3.8293, -3.5976, -3.2848, -2.2919, -1.1986, -0.4736, 0.5059, 1.0908, 0.7685, 0.1275, -1.0507, -2.0909];

Plotly.newPlot('chart1', [
    {x: dates, y: target, name: 'SLOPE Stabilizzato (target)', line: {color: '#00d4ff', width: 2.5}},
    {x: dates, y: instant, name: 'SLOPE Istantaneo (instabile)', line: {color: '#ff6b6b', width: 1.5, dash: 'dash'}},
    {x: dates, y: dF14, name: 'dF smooth EMA(14) - scalato', line: {color: '#4ecdc4', width: 2}},
    {x: dates, y: macd, name: 'MACD(12,26) - scalato', line: {color: '#ffd93d', width: 2}}
], {
    title: 'Confronto: SLOPE Stabilizzato vs Indicatori Causali',
    paper_bgcolor: '#16213e',
    plot_bgcolor: '#16213e',
    font: {color: '#e0e0e0'},
    xaxis: {gridcolor: '#333'},
    yaxis: {gridcolor: '#333', title: 'Valore'},
    legend: {x: 0, y: 1.15, orientation: 'h'},
    height: 500
});

// Chart 2: Rolling correlation
const rc_i = [0.6174, 0.6176, 0.6158, 0.6131, 0.6102, 0.6086, 0.6074, 0.6067, 0.6073, 0.61, 0.6129, 0.6147, 0.6142, 0.6124, 0.6077, 0.6017, 0.5958, 0.5894, 0.5827, 0.5761, 0.57, 0.5656, 0.5638, 0.5651, 0.5695, 0.5777, 0.5896, 0.6044, 0.6207, 0.639, 0.6571, 0.6736, 0.6893, 0.7048, 0.7193, 0.7322, 0.7443, 0.7533, 0.7565, 0.753, 0.7429, 0.7273, 0.7095, 0.6906, 0.67, 0.6474, 0.6188, 0.585, 0.5448, 0.501, 0.4528, 0.408, 0.3757, 0.3549, 0.3472, 0.3507, 0.3613, 0.3709, 0.3742, 0.3647, 0.3428, 0.3134, 0.2871, 0.2667, 0.2492, 0.2211, 0.1865, 0.1356, 0.0822, 0.0351, 0.0009, -0.0191, -0.0236, 0.0051, 0.0578, 0.1324, 0.2113, 0.2856, 0.3546, 0.4167, 0.4734, 0.5231, 0.5642, 0.6, 0.6296, 0.6543, 0.6754, 0.6941, 0.7104, 0.7246, 0.7364, 0.7462, 0.7546, 0.7618, 0.7678, 0.7729, 0.7769, 0.7805, 0.784, 0.7873, 0.7903, 0.7926, 0.7946, 0.7966, 0.7981, 0.7999, 0.8029, 0.8062, 0.8103, 0.8161, 0.8243, 0.8328, 0.8393, 0.8443, 0.8469, 0.8465, 0.841, 0.831, 0.8142, 0.7901, 0.7607, 0.7272, 0.6939, 0.6622, 0.6318, 0.6049, 0.5841, 0.5699, 0.5653, 0.5696, 0.5814, 0.6012, 0.6289, 0.6567, 0.6814, 0.6984, 0.7095, 0.7165, 0.719, 0.7164, 0.7088, 0.6962, 0.6806, 0.6612, 0.6413, 0.6217, 0.5998, 0.575, 0.549, 0.522, 0.4915, 0.467, 0.447, 0.4334, 0.4243, 0.4221, 0.4318, 0.4552, 0.487, 0.5222, 0.5598, 0.5964, 0.6352, 0.6769, 0.7193, 0.7576, 0.7912, 0.8189, 0.8405, 0.8537, 0.8599, 0.8622, 0.862, 0.8609, 0.8597, 0.8575, 0.8547, 0.8523, 0.8509, 0.8498, 0.848, 0.8458, 0.8419, 0.8371, 0.8321, 0.8258, 0.8175, 0.8076, 0.7958, 0.7828, 0.7692, 0.7543, 0.7375, 0.7211, 0.7044, 0.689, 0.6755, 0.6629, 0.6514, 0.6401];
const rc_d = [0.8449, 0.8421, 0.8378, 0.8336, 0.8301, 0.8287, 0.8277, 0.8271, 0.8271, 0.8266, 0.8251, 0.8228, 0.8197, 0.8178, 0.8151, 0.8122, 0.8094, 0.8058, 0.8021, 0.799, 0.7965, 0.7954, 0.7959, 0.7979, 0.8013, 0.8075, 0.8158, 0.8248, 0.8337, 0.8433, 0.852, 0.8589, 0.8653, 0.8721, 0.8785, 0.8842, 0.8904, 0.8946, 0.8947, 0.8905, 0.8825, 0.8719, 0.8602, 0.8465, 0.8316, 0.8157, 0.7939, 0.7693, 0.7401, 0.7102, 0.6773, 0.6502, 0.6361, 0.6308, 0.6334, 0.6401, 0.6451, 0.644, 0.6333, 0.6074, 0.5722, 0.534, 0.5039, 0.4821, 0.4633, 0.4328, 0.3957, 0.341, 0.2849, 0.2382, 0.2073, 0.1921, 0.1928, 0.2255, 0.2773, 0.3442, 0.4098, 0.4679, 0.5194, 0.5638, 0.6038, 0.6388, 0.667, 0.6921, 0.7124, 0.7286, 0.7424, 0.755, 0.7663, 0.7766, 0.7855, 0.7929, 0.7993, 0.805, 0.8099, 0.8145, 0.8184, 0.8222, 0.8259, 0.8299, 0.8339, 0.8374, 0.8417, 0.8478, 0.8542, 0.8615, 0.8712, 0.8815, 0.8931, 0.9058, 0.9201, 0.9323, 0.9409, 0.9479, 0.9529, 0.9558, 0.9555, 0.9528, 0.9458, 0.9349, 0.9223, 0.9084, 0.8959, 0.8856, 0.8766, 0.8702, 0.867, 0.8675, 0.8718, 0.877, 0.883, 0.8901, 0.8972, 0.9008, 0.9008, 0.8969, 0.891, 0.884, 0.8763, 0.8669, 0.8563, 0.8436, 0.8295, 0.8136, 0.7986, 0.7853, 0.7709, 0.7541, 0.7372, 0.7199, 0.6999, 0.6858, 0.6748, 0.6692, 0.6658, 0.6673, 0.6785, 0.6992, 0.7228, 0.7458, 0.7684, 0.7888, 0.8109, 0.8369, 0.8634, 0.8853, 0.9035, 0.9171, 0.9266, 0.9304, 0.9303, 0.9294, 0.9279, 0.9263, 0.9253, 0.9237, 0.9217, 0.9205, 0.9213, 0.923, 0.9247, 0.9265, 0.9269, 0.9269, 0.9273, 0.9268, 0.9248, 0.9222, 0.9189, 0.9155, 0.913, 0.9102, 0.9064, 0.9031, 0.8996, 0.8964, 0.8936, 0.8915, 0.89, 0.8878];
const rc_m = [0.8128, 0.8103, 0.8062, 0.8021, 0.7986, 0.7971, 0.7962, 0.7958, 0.7959, 0.7962, 0.7955, 0.7939, 0.7913, 0.7895, 0.7865, 0.783, 0.7798, 0.7757, 0.7717, 0.768, 0.7652, 0.7638, 0.7644, 0.7666, 0.7706, 0.7775, 0.7868, 0.797, 0.8073, 0.8183, 0.8284, 0.8365, 0.844, 0.8518, 0.8592, 0.8659, 0.8728, 0.8775, 0.8778, 0.8733, 0.8645, 0.8528, 0.8399, 0.8254, 0.8097, 0.7929, 0.7701, 0.744, 0.7132, 0.6813, 0.6461, 0.6167, 0.6007, 0.5941, 0.5961, 0.6032, 0.6093, 0.6096, 0.6005, 0.5763, 0.5426, 0.5059, 0.4774, 0.4571, 0.44, 0.4106, 0.3743, 0.3199, 0.2637, 0.2167, 0.1853, 0.1695, 0.1697, 0.2027, 0.2555, 0.3242, 0.3918, 0.4519, 0.5052, 0.5515, 0.5931, 0.6295, 0.6589, 0.685, 0.7062, 0.7232, 0.7378, 0.751, 0.7629, 0.7736, 0.7828, 0.7905, 0.7971, 0.803, 0.8081, 0.8127, 0.8166, 0.8204, 0.8243, 0.8282, 0.8322, 0.8356, 0.8395, 0.8446, 0.8499, 0.8561, 0.8644, 0.8734, 0.8835, 0.8951, 0.9085, 0.9203, 0.9288, 0.9356, 0.9402, 0.9426, 0.9413, 0.937, 0.9277, 0.9139, 0.8977, 0.8799, 0.8636, 0.8498, 0.8374, 0.8283, 0.8234, 0.8233, 0.8285, 0.8357, 0.8442, 0.8546, 0.8656, 0.8725, 0.875, 0.8725, 0.8675, 0.8612, 0.8539, 0.8446, 0.8336, 0.8201, 0.8053, 0.7885, 0.7726, 0.7585, 0.743, 0.725, 0.7066, 0.6875, 0.6654, 0.6494, 0.6369, 0.6299, 0.6257, 0.6267, 0.6382, 0.6603, 0.6861, 0.7117, 0.7371, 0.7603, 0.7852, 0.8141, 0.8433, 0.8678, 0.8883, 0.9037, 0.9147, 0.9194, 0.9197, 0.9188, 0.9171, 0.9153, 0.914, 0.9121, 0.9099, 0.9085, 0.9091, 0.9106, 0.9119, 0.9131, 0.9129, 0.912, 0.9116, 0.9102, 0.9073, 0.9035, 0.8987, 0.8937, 0.8893, 0.8845, 0.8786, 0.8734, 0.8681, 0.8636, 0.8598, 0.8567, 0.8541, 0.8506];

Plotly.newPlot('chart2', [
    {x: dates, y: rc_i, name: 'SLOPE Istantaneo', line: {color: '#ff6b6b', width: 1.5}},
    {x: dates, y: rc_d, name: 'dF smooth EMA(14)', line: {color: '#4ecdc4', width: 2}},
    {x: dates, y: rc_m, name: 'MACD(12,26)', line: {color: '#ffd93d', width: 2}}
], {
    title: 'Correlazione Rolling (60 giorni) con SLOPE Stabilizzato',
    paper_bgcolor: '#16213e',
    plot_bgcolor: '#16213e',
    font: {color: '#e0e0e0'},
    xaxis: {gridcolor: '#333'},
    yaxis: {gridcolor: '#333', title: 'Correlazione', range: [0, 1]},
    legend: {x: 0, y: 1.15, orientation: 'h'},
    height: 400,
    shapes: [{type: 'line', y0: 0.8, y1: 0.8, x0: 0, x1: 1, xref: 'paper', line: {color: '#666', dash: 'dot'}}]
});
</script>
</body>
</html>